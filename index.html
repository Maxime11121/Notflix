<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotFlix Ultra - Unlimited Streaming</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#141414">
</head>
<body class="theme-dark">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loader"></div>
        <p>Loading NotFlix Ultra...</p>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo" onclick="location.href='index.html'">NOTFLIX</div>
                <ul class="nav-menu">
                    <li><a href="#" class="active" onclick="loadHome()">Home</a></li>
                    <li><a href="#" onclick="loadMovies()">Movies</a></li>
                    <li><a href="#" onclick="loadTVShows()">TV Shows</a></li>
                    <li><a href="#" onclick="loadTrending()">Trending</a></li>
                    <li><a href="#" onclick="showMyList()">My List</a></li>
                </ul>
            </div>
            
            <div class="nav-right">
                <!-- Advanced Search -->
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search movies, TV shows, actors...">
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>
                
                <!-- Voice Search -->
                <button class="icon-btn" onclick="startVoiceSearch()" title="Voice Search">
                    <i class="fas fa-microphone"></i>
                </button>
                
                <!-- Random Picker -->
                <button class="icon-btn" onclick="randomPicker()" title="I'm Feeling Lucky">
                    <i class="fas fa-dice"></i>
                </button>
                
                <!-- Notifications -->
                <div class="notification-bell" onclick="toggleNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationCount">0</span>
                    <div class="notification-dropdown" id="notificationDropdown"></div>
                </div>
                
                <!-- User Profile -->
                <div class="user-profile" onclick="toggleProfileMenu()">
                    <img id="userAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Crect fill='%23e50914' width='32' height='32' rx='4'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='18' font-weight='bold'%3EU%3C/text%3E%3C/svg%3E" alt="Profile">
                    <i class="fas fa-caret-down"></i>
                    
                    <div class="profile-dropdown" id="profileDropdown">
                        <div class="profile-header">
                            <img id="profileAvatar" src="" alt="">
                            <div>
                                <h4 id="profileUsername">User</h4>
                                <p id="profileEmail">user@example.com</p>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
                        <a href="#" onclick="showSettings()"><i class="fas fa-cog"></i> Settings</a>
                        <a href="#" onclick="showStats()"><i class="fas fa-chart-bar"></i> Statistics</a>
                        <a href="#" onclick="showAchievements()"><i class="fas fa-trophy"></i> Achievements</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Banner -->
    <section class="hero" id="heroBanner">
        <div class="hero-content">
            <h1 class="hero-title" id="heroTitle">Loading...</h1>
            <div class="hero-metadata">
                <span class="match">98% Match</span>
                <span class="year" id="heroYear">2024</span>
                <span class="rating">HD</span>
                <span class="duration" id="heroDuration">2h 30m</span>
            </div>
            <p class="hero-description" id="heroDescription">Loading...</p>
            <div class="hero-buttons">
                <button class="btn btn-play" onclick="playHeroMovie()">
                    <i class="fas fa-play"></i> Play
                </button>
                <button class="btn btn-info" onclick="showHeroInfo()">
                    <i class="fas fa-info-circle"></i> More Info
                </button>
                <button class="btn btn-icon" onclick="addHeroToList()">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="btn btn-icon" onclick="likeHero()">
                    <i class="fas fa-thumbs-up"></i>
                </button>
            </div>
        </div>
        <div class="hero-fade"></div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Continue Watching -->
        <section class="content-section" id="continueWatchingSection" style="display: none;">
            <div class="section-header">
                <h2>Continue Watching</h2>
                <button class="clear-btn" onclick="clearContinueWatching()">Clear All</button>
            </div>
            <div class="movie-row" id="continueWatching"></div>
        </section>

        <!-- Trending Now -->
        <section class="content-section">
            <div class="section-header">
                <h2>Trending Now</h2>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid"><i class="fas fa-th"></i></button>
                    <button class="view-btn" data-view="list"><i class="fas fa-list"></i></button>
                </div>
            </div>
            <div class="movie-row" id="trending"></div>
        </section>

        <!-- Top 10 -->
        <section class="content-section">
            <h2>Top 10 Today</h2>
            <div class="movie-row top10-row" id="top10"></div>
        </section>

        <!-- Popular Movies -->
        <section class="content-section">
            <h2>Popular on NotFlix</h2>
            <div class="movie-row" id="popular"></div>
        </section>

        <!-- Genres -->
        <section class="content-section">
            <h2>Action & Adventure</h2>
            <div class="movie-row" id="action"></div>
        </section>

        <section class="content-section">
            <h2>Comedies</h2>
            <div class="movie-row" id="comedy"></div>
        </section>

        <section class="content-section">
            <h2>Horror Movies</h2>
            <div class="movie-row" id="horror"></div>
        </section>

        <section class="content-section">
            <h2>Sci-Fi & Fantasy</h2>
            <div class="movie-row" id="scifi"></div>
        </section>

        <section class="content-section">
            <h2>Romance</h2>
            <div class="movie-row" id="romance"></div>
        </section>
    </main>

    <!-- Movie Detail Modal (FIXED - Simple container for JS to fill) -->
    <div id="movieModal" class="modal">
        <div class="modal-backdrop" onclick="closeModal()"></div>
        <div class="modal-container">
            <button class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-body">
                <!-- JavaScript will fill this -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-backdrop" onclick="closeSettingsModal()"></div>
        <div class="settings-container">
            <button class="modal-close" onclick="closeSettingsModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <h2>Settings</h2>
            
            <div class="settings-tabs">
                <button class="tab-btn active" data-tab="appearance">Appearance</button>
                <button class="tab-btn" data-tab="playback">Playback</button>
                <button class="tab-btn" data-tab="notifications">Notifications</button>
                <button class="tab-btn" data-tab="privacy">Privacy</button>
            </div>
            
            <div class="settings-content">
                <!-- Appearance Tab -->
                <div class="tab-content active" data-tab="appearance">
                    <div class="setting-item">
                        <label>Theme</label>
                        <select id="themeSelect" onchange="changeTheme(this.value)">
                            <option value="dark">Dark</option>
                            <option value="light">Light</option>
                            <option value="netflix">Netflix Classic</option>
                            <option value="midnight">Midnight Blue</option>
                            <option value="forest">Forest Green</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label>Language</label>
                        <select id="languageSelect">
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                            <option value="de">Deutsch</option>
                            <option value="ja">日本語</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="animationsToggle" checked> Enable Animations
                        </label>
                    </div>
                </div>
                
                <!-- Playback Tab -->
                <div class="tab-content" data-tab="playback">
                    <div class="setting-item">
                        <label>Default Quality</label>
                        <select id="qualitySelect">
                            <option value="auto">Auto</option>
                            <option value="4k">4K</option>
                            <option value="1080p">1080p</option>
                            <option value="720p">720p</option>
                            <option value="480p">480p</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="autoplayToggle" checked> Autoplay Next Episode
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="skipIntroToggle" checked> Auto-Skip Intros
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>Subtitle Language</label>
                        <select id="subtitleLanguageSelect">
                            <option value="off">Off</option>
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                        </select>
                    </div>
                </div>
                
                <!-- Notifications Tab -->
                <div class="tab-content" data-tab="notifications">
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="pushNotifications" checked> Push Notifications
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="emailNotifications"> Email Notifications
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="newReleases" checked> New Releases
                        </label>
                    </div>
                </div>
                
                <!-- Privacy Tab -->
                <div class="tab-content" data-tab="privacy">
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="activityTracking" checked> Activity Tracking
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="friendActivity"> Show My Activity to Friends
                        </label>
                    </div>
                    
                    <button class="btn-danger" onclick="clearAllData()">Clear All Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts at the END of body -->
    <script src="js/sources.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/subtitles.js"></script>
    <script src="js/social.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/app.js"></script>
</body>
</html>